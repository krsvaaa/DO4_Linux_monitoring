# DO4_Linux_monitoring

Учебный проект по мониторингу (bash, Grafana, Prometheus)

В директории **src** находятся поддиректории: каждая по разному заданию.


## 01

Скрипт по генерации директорий и файлов в них. 

Запускается через **main.sh** с 6 аргументами:

1 - путь к директории, в которой будут создаваться поддиректории

2 - количество поддиректорий

3 - список букв, из которых будут генерироваться названия директорий (например, abcd > директории aaabc, abbbcc, aaabccc и т.д)

4 - количество файлов в директориях

5 - список букв, из которых будут генерироваться названия файлов

6 - размеры файлов в kb


Пример запуска - ```./main.sh /home abc 5 defh 10 5kb```


Названия поддиректорий включают в себя дату создания (aaaabbcc_13122025). Скрипт останавливает работу, если на момент генерации остается меньше 1Гб памяти. Также создается лог **changes.log** по результатам работы скрипта.


## 02

Скрипт генерирует рандомное количество файлов и не больше 100 директорий, пути для генерации рандомные (кроме системных папок), запускается через **main.sh*** с 3 аргументами:

1 - список букв, из которых будут генерироваться названия директорий

2 - список букв, из которых будут генерироваться названия файлов

3 - размер файлов в Mb

Пример запуска - ```./main.sh abc defh 5Mb``` (для корректной работы запускать с sudo)


Создается лог **changes.log**. Скрипт останавливает работу, если на момент генерации остается меньше 1Гб памяти. 


## 03

Скрипт для удаления файлов, созданных в задании 02. Обращается к логу по пути **../02/changes.log**

Запускается через **main.sh** с одним аргументом. Аргументы на выбор:

1 - удаление на основе записей в лог-файле

2 - удаление файлов, созданных в отрезке времени. При запуске скрипт ожидает на ввод сначала дату начала отрезка времени, потом дату окончания в формате YYYY-MM-DD HH:MM (в отрезок НЕ ВКЛЮЧАЮТСЯ файлы, созданные в точную дату окончания)

3 - удаление папок по их имени (например, aaaabbcc_13122025). При запуске скрипт ожидает точное название директории


Пример запуска - ```./main.sh 1``` (для корректной работы запускать с sudo)


## 04

Скрипт гененрирует логи(как у nginx) в комбинированном формате. Запускается через **main.sh** без аргументов, на выходе появляются 5 логов **log_file_$i.log**


## 05

Скрипт для сортировки логов по определенным параметрам. Работает с логами по пути **../04/log_file_*.log**. Запускается через **main.sh** с одним из 4 аргументов:

1 - сортировка по кодам ответов (на выходе упорядоченный список в порядке возрастания кодов, состоящий из всех 5 логов из задания 04)

2 - выдает все уникальные ip из логов

3 - вывод всех записей с кодами ошибок 4xx и 5xx

4 - вывод уникальных ip, запросы с которых выдали ошибки 4xx и 5xx

Пример запуска:
```bash
./main.sh 1
```


## 06

Скрипт работает аботает с логами по пути **../04/log_file_*.log**. Запускается через **main.sh** без аргументов. Создает **report.html** при помощи GoAccess, который открывается в браузере и показывает аналитику по логам.

## 07

Задача по интеграции Prometheus с Grafana. Был собран собственный дашборд по определенным метрикам. В папке есть файл **07.md**, в котором показана статистика системы: CPU, доступная RAM, свободное место, число операций I/O до и после запуска скрипта по генерации файлов и папок из задания 02.


## 08

Задача по Grafana с использованием готового дашборда Node Exporter Quickstart and Dashboard. В папке есть файл **08.md** с визуализацией метрик: CPU, средняя нагрузка на ЦП, свободное место, число операций I/O и нагрузка на сеть до и после запуска скрипта по генерации файлов и папок из задания 02.

